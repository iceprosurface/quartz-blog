---
title: 享元模式
date: 2024-05-16T23:45:29+08:00
updated: 2024-06-01T13:22:08+08:00
permalink: 
tags:
  - 设计模式
ccby: false
---
享元模式（Flyweight Pattern）是一种结构型 [[设计模式/设计模式]]，其核心目的是在有大量对象存在时，通过共享尽可能多的相似状态来减少内存使用，从而提高程序性能。这种模式是对对象的细粒度共享，特别适用于大量对象中只有少数状态组合的情况。

在享元模式中，通常有两个概念：

1. 内部状态（Intrinsic State）：对象共享出来的信息，存储在享元对象内部，不会随环境的改变而有所不同。
2. 外部状态（Extrinsic State）：对象得以依赖的一个标记，随环境改变而改变，不可共享。

实现享元模式时，通常会创建一个工厂类来管理已经创建的享元对象，当请求一个享元对象时，工厂检查是否已经创建，如果已创建则返回现有的对象，否则创建一个新的享元对象。

举例来说，在文本编辑器中，字母'a'可能在文档中出现数千次，但我们不需要为每一个'a'创建一个独立的对象。我们可以创建一个'a'的享元对象，每次需要表示'a'时，我们就引用这个已经创建的享元对象，通过改变其外部状态（如位置、大小、颜色等）来表示不同情境下的'a'。

使用享元模式可以大幅度减少应用程序所需的对象数量，从而减少内存占用并提高性能。但是，这种模式也可能增加系统的复杂性，需要维护更多的对象状态。